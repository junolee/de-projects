version: 2

models:
  - name: fct_sales_enriched
    description: "Enriched weekly sales by store department joined with store-week signals - Grain: (store, department, week)"
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns: [store_id, dept_id, store_date]
    columns:
      - name: store_id
        data_tests: [not_null]
      - name: dept_id
        data_tests: [not_null]
      - name: store_date
        data_tests: [not_null]

  - name: dim_store
    description: "Store departments joined with store-level attributes (store type, size) - Grain: (store, department)"
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns: [store_id, dept_id]
    columns:
      - name: store_id
        data_tests: [not_null]
      - name: dept_id
        data_tests: [not_null]

  - name: dim_date
    description: "Date (Friday) of every week - Grain: (1 week)"
    columns:
      - name: date_id
        data_tests: [not_null, unique]
      - name: store_date
        data_tests: [not_null, unique]